[[source]]
url = "https://pypi.org/simple"
verify_ssl = true
name = "pypi"

[packages]
django = {version = "~=4.1", extras = ["argon2"]}
# Postgres
psycopg2 = "*"
# 3rd Party ( Middlewares )
django_cleanup = "*"
django_cors_headers = "*"
# 3rd Party ( ENV )
python_dotenv = "*"
# 3rd Party ( WhiteNoise )
whitenoise = {extras = ["brotli"], version = "*"}
# 3rd Party ( Tasks )
huey = "*"
redis = "*"
hiredis = {version="*", markers="sys_platform != 'win32'"}
# Rest framework
django_ninja = "*"
# Remove when
# https://github.com/vitalik/django-ninja/issues/305
django-ninja-jwt = "*"
# HTTP Client
aiohttp = '*'
# aiohttp fails 
async-timeout = ">=4.0.0a3"
# Will replace requests with aiohttp
requests = "*"
requests_cache = "*"
requests_ratelimiter = "*"
# Web servers
gunicorn = {extras = ["setproctile"], version = "*"}
uvicorn = {extras = ["standard"], version = "*"}
# Image processing
pillow = "*"
# Discord API
"discord.py" = {extras = ["voice",'speed'], version = "*"}

[dev-packages]
django_debug_toolbar = "*"
django_dbbackup = "*"
django_cprofile_middleware = "*"
## Code formatting
# Black
black = "*"
# Flake8
flake8 = "*"
# Pylint
pylint = "*"
pylint_django = "*"
# Mypy
mypy = "*"
types_requests = "*"
types_redis = "*"
django_stubs = {extras = ["compatible_mypy"], version = "*"}
aiohttp-devtools = "*"

[requires]
python_version = "3.10"

[scripts]
## Dev Servers
dev_django = "python ./django_core/manage.py runserver"
dev_aiohttp = 'adev runserver ./aiohttp_core/server.py --app-factory=aiohttp_app'
## Prod servers
prod_uvicorn = "gunicorn django_core/core.asgi:application -w 4 -k uvicorn.workers.UvicornWorker" # For linux only
prod_aiohttp = "gunicorn aiohttp_core.server:aiohttp_app -w 4 --bind localhost:8001 --worker-class aiohttp.GunicornUVLoopWebWorker" # We want to run this without any proxy or anything
##  Migrations
sync = "python ./django_core/manage.py migrate"
mksync = "python ./django_core/manage.py makemigrations"
## Task queue
huey = "python ./django_core/manage.py run_huey"
## Staticfiles
collectstatic = "python ./django_core/manage.py collectstatic --clear --link" # Dont duplicate copy files.

[pipenv]
allow_prereleases = true
